## 常见问题



### 1. java（包括 springboot ）读取resources下文件方式

https://www.cnblogs.com/whalesea/p/11677657.html

#### 首先查看 pom.xml 配置资源路径

```xml
<resource>
    <directory>src/main/resources</directory>
    <includes>
        <include>**/*</include>
    </includes>
    <filtering>true</filtering>
</resource>
```

#### 1.1 使用项目内路径读取，该路径只在开发工具中显示

> 类似：`src/main/resources/resource.properties`。只能在开发工具中使用，部署之后无法读取。（**不通用**）

```java
File file = new File("src/main/resources/resource.properties");
```

#### 1.2 `org.springframework.util.ResourceUtils`

> **在`linux`环境中无法读取。（不通用）**
>
> `jar`包找不到路径

```java
File file = ResourceUtils.getFile("classpath:resource.properties");
FileInputStream fis = new FileInputStream(file);
```

#### 1.3 `org.springframework.core.io.ClassPathResource`

> **各种环境都能读取。（通用）**

```java
Resource resource = new ClassPathResource("resource.properties");
InputStream is = resource.getInputStream();

FileUtils.copyInputStreamToFile();
```

#### 1.4 注解 + `org.springframework.core.io.ResourceLoader`

> **结合spring注解，使用`org.springframework.core.io.ResourceLoader`;类的注解。（通用）**

```java
@Autowired
ResourceLoader resourceLoader;

@Test
public void testReaderFile() throws IOException {
    Resource resource = resourceLoader.getResource("classpath:resource.properties");
    InputStream is = resource.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);
    String data = null;
    while((data = br.readLine()) != null) {
        System.out.println(data);
    }

    br.close();
    isr.close();
    is.close();
}
```

```java
@Autowired
ResourceLoader resourceLoader;

Resource resource1 = resourceLoader.getResource("classpath:static/excel/1.xlsx");
File f4 = resource1.getFile();
```

不使用注解方式

```java
// 获取资源
ResourceLoader resourceLoader = new DefaultResourceLoader();
Resource resource = resourceLoader.getResource("classpath:static/excel/1.xlsx");
InputStream fs = resource.getInputStream();
```

### 2. 自动装配为 null

调用时组件类也应使用`@AutoWired`